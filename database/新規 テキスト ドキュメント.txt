import sqlite3
from config.settings import DB_PATH
from datetime import datetime

def save_long_term_memory(character_name, user_name, topic, memory_text):
    """é•·æœŸè¨˜æ†¶ã‚’ä¿å­˜ã™ã‚‹ï¼ˆã‚­ãƒ£ãƒ©åãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼åãƒ»ãƒˆãƒ”ãƒƒã‚¯ãƒ»å†…å®¹ï¼‰"""
    try:
        conn = sqlite3.connect(DB_PATH)
        cursor = conn.cursor()

        cursor.execute("""
            INSERT INTO long_term_memory (character_name, user_name, topic, memory, timestamp)
            VALUES (?, ?, ?, ?, ?)
        """, (character_name, user_name, topic, memory_text, datetime.now()))

        conn.commit()
        print(f"ğŸ§  è¨˜æ†¶ä¿å­˜å®Œäº†: {topic} - {memory_text}")
    except sqlite3.Error as e:
        print(f"âŒ DBä¿å­˜ã‚¨ãƒ©ãƒ¼: {e}")
    finally:
        conn.close()
